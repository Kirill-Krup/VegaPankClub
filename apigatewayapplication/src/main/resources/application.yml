server:
  port: 8080
spring:
  application:
    name: apigatewayapplication
  main:
    web-application-type: reactive
  webflux:
    static-path-pattern: /static/**
  web:
    resources:
      static-locations: classpath:/static/
  cloud:
    gateway:
      server:
        webflux:
          routes:
            - id: userservice-public
              uri: http://user-service:8081
              predicates:
                - Path=/api/v1/auth/login,/api/v1/auth/register
            - id: userservice-protected
              uri: http://user-service:8081
              predicates:
                - Path=/api/v1/users/**,/api/v1/profile/**, /api/v1/auth/logout, /api/v1/reviews/**
            - id: product-protected
              uri: http://product-service:8082
              predicates:
                - Path=/api/v1/products/**,/api/v1/orders/**
            - id: productservice-images
              uri: http://product-service:8082
              predicates:
                  - Path=/static/images/**
            - id: inventoryservice-route
              uri: http://inventory-service:8083
              predicates:
                - Path=/api/v1/pcs/**
            - id: billingservice-route
              uri: http://billing-service:8084
              predicates:
                - Path=/api/v1/tariffs/**,/api/v1/sessions/**
            - id: adminservice-route
              uri: http://admin-service:8085
              predicates:
                - Path=/api/v1/admin/sessions/**,/api/v1/admin/payments/**,/api/v1/admin/orders/**
            - id: payment-service-route
              uri: http://payment-service:8086
              predicates:
                - Path=/api/v1/payments/**


jwt:
  secret: ${JWT_SECRET}
  ttl-seconds: 8600000
  issuer: actisys-auth

logging:
  level:
    com.actisys.apigatewayapplication.filter: DEBUG
    com.actisys.apigatewayapplication.util: DEBUG
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"